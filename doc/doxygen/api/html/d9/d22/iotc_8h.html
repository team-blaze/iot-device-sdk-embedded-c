<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud IoT Device SDK for Embedded C API: iotc.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud IoT Device SDK for Embedded C API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">iotc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d9/df6/iotc__connection__data_8h_source.html">iotc_connection_data.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/d03/iotc__mqtt_8h_source.html">iotc_mqtt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d0/d57/iotc__time_8h_source.html">iotc_time.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d7/d2c/iotc__types_8h_source.html">iotc_types.h</a>&gt;</code><br />
</div>
<p><a href="../../d9/d22/iotc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a949c6fa4e75efb1814aa5cbedf742c12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a949c6fa4e75efb1814aa5cbedf742c12">iotc_initialize</a> ()</td></tr>
<tr class="separator:a949c6fa4e75efb1814aa5cbedf742c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5bb467d736cd8b6e8de62e8a5fdda23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#ac5bb467d736cd8b6e8de62e8a5fdda23">iotc_shutdown</a> ()</td></tr>
<tr class="separator:ac5bb467d736cd8b6e8de62e8a5fdda23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657294c0f1cda3a8ec5a2bb284709657"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657">iotc_create_context</a> ()</td></tr>
<tr class="separator:a657294c0f1cda3a8ec5a2bb284709657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b8276f88ce6816e67c1c1b23edd534"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a18b8276f88ce6816e67c1c1b23edd534">iotc_delete_context</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> context_handle)</td></tr>
<tr class="separator:a18b8276f88ce6816e67c1c1b23edd534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e7d4bc247d4c598bbac21853f9124c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a51e7d4bc247d4c598bbac21853f9124c">iotc_is_context_connected</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> context_handle)</td></tr>
<tr class="separator:a51e7d4bc247d4c598bbac21853f9124c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf6bc8892b8651c9dac35e5c471c96fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#abf6bc8892b8651c9dac35e5c471c96fc">iotc_events_process_blocking</a> ()</td></tr>
<tr class="separator:abf6bc8892b8651c9dac35e5c471c96fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3efc2d5d965a14116fb8fdbd3a4e45e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#af3efc2d5d965a14116fb8fdbd3a4e45e">iotc_events_process_tick</a> ()</td></tr>
<tr class="separator:af3efc2d5d965a14116fb8fdbd3a4e45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3809c15f5bbf5f7a2a569c11b87a29dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a3809c15f5bbf5f7a2a569c11b87a29dc">iotc_events_stop</a> ()</td></tr>
<tr class="separator:a3809c15f5bbf5f7a2a569c11b87a29dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ab2dda7fedc71942119642f5b0e9c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2">iotc_connect</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_h, const char *username, const char *password, const char *client_id, uint16_t connection_timeout, uint16_t keepalive_timeout, <a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *client_callback)</td></tr>
<tr class="separator:a48ab2dda7fedc71942119642f5b0e9c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c951dc7534f8e90075a38c77c77fa7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#a42c951dc7534f8e90075a38c77c77fa7">iotc_connect_to</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_h, const char *host, uint16_t port, const char *username, const char *password, const char *client_id, uint16_t connection_timeout, uint16_t keepalive_timeout, <a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *client_callback)</td></tr>
<tr class="separator:a42c951dc7534f8e90075a38c77c77fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad182450f87d708b57451afadee80d94f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#ad182450f87d708b57451afadee80d94f">iotc_publish</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_h, const char *topic, const char *msg, const <a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a0a18a74056aa3064683f73b458eb5913">iotc_mqtt_qos_t</a> qos, <a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *callback, void *user_data)</td></tr>
<tr class="separator:ad182450f87d708b57451afadee80d94f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea56344dbfbfd50707294338794920d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#aea56344dbfbfd50707294338794920d8">iotc_publish_data</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_h, const char *topic, const uint8_t *data, size_t data_len, const <a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a0a18a74056aa3064683f73b458eb5913">iotc_mqtt_qos_t</a> qos, <a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *callback, void *user_data)</td></tr>
<tr class="separator:aea56344dbfbfd50707294338794920d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca7aacc10616954169bff4eed5bfc834"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#aca7aacc10616954169bff4eed5bfc834">iotc_subscribe</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_h, const char *topic, const <a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a0a18a74056aa3064683f73b458eb5913">iotc_mqtt_qos_t</a> qos, <a class="el" href="../../d7/d2c/iotc__types_8h.html#a016750835b9d59ee37282b5c02e59797">iotc_user_subscription_callback_t</a> *callback, void *user_data)</td></tr>
<tr class="separator:aca7aacc10616954169bff4eed5bfc834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada03683c17e3cf3c5ed286e040140dc9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d22/iotc_8h.html#ada03683c17e3cf3c5ed286e040140dc9">iotc_shutdown_connection</a> (<a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_h)</td></tr>
<tr class="separator:ada03683c17e3cf3c5ed286e040140dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Securely connect client applications to Google Cloud IoT Core. </p>

<p class="definition">Definition in file <a class="el" href="../../d9/d22/iotc_8h_source.html">iotc.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a48ab2dda7fedc71942119642f5b0e9c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48ab2dda7fedc71942119642f5b0e9c2">&#9670;&nbsp;</a></span>iotc_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>iotc_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>connection_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>keepalive_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *&#160;</td>
          <td class="paramname"><em>client_callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to Cloud IoT Core with the provided context. </p>
<p>This parameters include a pointer to connection state monitor callback function.</p>
<p><code><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t()</a></code> defines the connection state monitor callback. <code><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t()</a></code> has the following signature: void foo( iotc_context_handle_t in_context_handle , void* data , iotc_state_t state )</p>
<p>The following are the <code><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t()</a></code> callback function parameters:</p><ul>
<li>in_context_handle: the context handle provided to <code><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect()</a></code>.</li>
<li>data: a multifunctional structure in the client application. See the <a href="../../../../../porting_guide.md">porting guide</a> or <code>examples/</code> for more information.</li>
<li>state: IOTC_STATE_OK if the connection succeeds. See <code><a href="../../~/include/iotc_error.h">iotc_error.h</a></code> for more error codes.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_h</td><td>A context handle created by invoking <code><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context()</a></code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">username</td><td>The MQTT username. Cloud IoT Core ignores this parameter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">password</td><td>The MQTT password. Cloud IoT Core requires a JWT. Create a JWT with the <code><a class="el" href="../../d8/df1/iotc__jwt_8h.html#af6e4cdf9d89a98a916b8584a03c03e4e" title="Create a JWT.">iotc_create_iotcore_jwt()</a></code> function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>The MQTT client identifier. Cloud IoT Core requires a <a href="https://cloud.google.com/iot/docs/how-tos/mqtt-bridge#device_authentication">device path</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">connection_timeout</td><td>The number of seconds to keep the socket before CONNACK. If 0, the TCP timeout is used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keepalive_timeout</td><td>The number of seconds that the MQTT service keeps the socket is be kept open without hearing from the client.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d8/df1/iotc__jwt_8h.html#af6e4cdf9d89a98a916b8584a03c03e4e" title="Create a JWT.">iotc_create_iotcore_jwt</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>The connection request is correctly enqueued. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a42c951dc7534f8e90075a38c77c77fa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42c951dc7534f8e90075a38c77c77fa7">&#9670;&nbsp;</a></span>iotc_connect_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_connect_to </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>iotc_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>connection_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>keepalive_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *&#160;</td>
          <td class="paramname"><em>client_callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a custom service endpoint via MQTT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Address at which the client connects. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>Port of the host on which to connect.</td></tr>
  </table>
  </dd>
</dl>
<p>This function's behavior and other parameters are identical to the <code><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect()</a></code> function.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect</a> </dd></dl>

</div>
</div>
<a id="a657294c0f1cda3a8ec5a2bb284709657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657294c0f1cda3a8ec5a2bb284709657">&#9670;&nbsp;</a></span>iotc_create_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a> iotc_create_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a connection context. </p>
<p>Invoke after initalizing <code>libiotc</code> through <code><a class="el" href="../../d9/d22/iotc_8h.html#a949c6fa4e75efb1814aa5cbedf742c12" title="Initialize libraries.">iotc_initialize()</a></code>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a949c6fa4e75efb1814aa5cbedf742c12" title="Initialize libraries.">iotc_initialize</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a18b8276f88ce6816e67c1c1b23edd534" title="Frees the provided context.">iotc_delete_context</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">nonnegative_number</td><td>a valid context handle is created. </td></tr>
    <tr><td class="paramname">negative_number</td><td>If the function fails, it returns the <a href="../../~/include/iotc_error.h">error code</a> multiplied by -1. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18b8276f88ce6816e67c1c1b23edd534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b8276f88ce6816e67c1c1b23edd534">&#9670;&nbsp;</a></span>iotc_delete_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_delete_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>context_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the provided context. </p>
<p>Invoke to free memory after the client application disconnects from Cloud IoT Core.</p>
<p>You may reuse disconnected contexts to reconnect to Cloud IoT Core; you don't need to destroy and recreate contexts.</p>
<p>Do not delete a context in the connection callback.</p>
<p>On POSIX systems, the client application must delete the context after <code>iotc_process_blocking()</code> returns.</p>
<p>On non-POSIX systems, the application must delete the context on the event loop tick after the disconnection event (not in the disconnection callback itself).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Context handle to free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>Status OK. </td></tr>
    <tr><td class="paramname">IOTC_INVALID_PARAMETER</td><td>The provided context handle is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abf6bc8892b8651c9dac35e5c471c96fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf6bc8892b8651c9dac35e5c471c96fc">&#9670;&nbsp;</a></span>iotc_events_process_blocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iotc_events_process_blocking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoke the event processing loop. </p>
<p>The IoT Device SDK has an event queueing mechanism to faciliate connection, subscription and publication requests in a non blocking, asynchronous manner.</p>
<p>Calling this function will execute the Device SDKs event engine as the main application process. This function will not return until <code><a class="el" href="../../d9/d22/iotc_8h.html#a3809c15f5bbf5f7a2a569c11b87a29dc" title="Shuts down the event engine.">iotc_events_stop()</a></code> is invoked.</p>
<p>Alternatively, call <code><a class="el" href="../../d9/d22/iotc_8h.html#af3efc2d5d965a14116fb8fdbd3a4e45e" title="Invoke the event processing loop.">iotc_events_process_tick()</a></code> to process events on platforms that have main application loops which cannot block indefinitely.</p>
<p><b>Note</b>: The event engine won't process events when the Device SDK is in the IOTC_EVENT_PROCESS_STOPPED state. Invoke <code><a class="el" href="../../d9/d22/iotc_8h.html#ac5bb467d736cd8b6e8de62e8a5fdda23" title="Free all resources created during initialization.">iotc_shutdown()</a></code> and then reinitialize the Device SDK with <code>iotc_initialize</code> to process events again.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#af3efc2d5d965a14116fb8fdbd3a4e45e" title="Invoke the event processing loop.">iotc_events_process_tick</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a3809c15f5bbf5f7a2a569c11b87a29dc" title="Shuts down the event engine.">iotc_events_stop</a> </dd></dl>

</div>
</div>
<a id="af3efc2d5d965a14116fb8fdbd3a4e45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3efc2d5d965a14116fb8fdbd3a4e45e">&#9670;&nbsp;</a></span>iotc_events_process_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_events_process_tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoke the event processing loop. </p>
<p>This function proccesses any pending tasks of a non-blocking manner and returns control back to the client application.</p>
<p>Recommended for RTOS or non-OS devices that must yield for standard tick operations.</p>
<p><b>Note</b>: The event engine won't process events when the Device SDK is in the IOTC_EVENT_PROCESS_STOPPED state. Invoke <code><a class="el" href="../../d9/d22/iotc_8h.html#ac5bb467d736cd8b6e8de62e8a5fdda23" title="Free all resources created during initialization.">iotc_shutdown()</a></code> and then reinitialize the Device SDK with <code>iotc_initialize</code> to process events again.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#abf6bc8892b8651c9dac35e5c471c96fc" title="Invoke the event processing loop.">iotc_events_process_blocking</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a3809c15f5bbf5f7a2a569c11b87a29dc" title="Shuts down the event engine.">iotc_events_stop</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>Status OK. The event system is ongoing and can continue to operate. </td></tr>
    <tr><td class="paramname">IOTC_EVENT_PROCESS_STOPPED</td><td>The event processor stopped because the client application invoked <code><a class="el" href="../../d9/d22/iotc_8h.html#a3809c15f5bbf5f7a2a569c11b87a29dc" title="Shuts down the event engine.">iotc_events_stop()</a></code> or an unrecoverable error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3809c15f5bbf5f7a2a569c11b87a29dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3809c15f5bbf5f7a2a569c11b87a29dc">&#9670;&nbsp;</a></span>iotc_events_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iotc_events_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shuts down the event engine. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#abf6bc8892b8651c9dac35e5c471c96fc" title="Invoke the event processing loop.">iotc_events_process_blocking</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#af3efc2d5d965a14116fb8fdbd3a4e45e" title="Invoke the event processing loop.">iotc_events_process_tick</a> </dd></dl>

</div>
</div>
<a id="a949c6fa4e75efb1814aa5cbedf742c12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a949c6fa4e75efb1814aa5cbedf742c12">&#9670;&nbsp;</a></span>iotc_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize libraries. </p>
<p>Required operation.</p>
<p>Applications should call this first when starting a new runtime.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>Status OK. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a51e7d4bc247d4c598bbac21853f9124c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e7d4bc247d4c598bbac21853f9124c">&#9670;&nbsp;</a></span>iotc_is_context_connected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t iotc_is_context_connected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>context_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if a context is connected to Cloud IoT Core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Handle of which to determine the connection.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a42c951dc7534f8e90075a38c77c77fa7" title="Connect to a custom service endpoint via MQTT.">iotc_connect_to</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>The context is currently connected </td></tr>
    <tr><td class="paramname">0</td><td>The context is invalid or the connection is currently any one of the other following states: unitialized, connecting, closing, or closed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad182450f87d708b57451afadee80d94f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad182450f87d708b57451afadee80d94f">&#9670;&nbsp;</a></span>iotc_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>iotc_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a0a18a74056aa3064683f73b458eb5913">iotc_mqtt_qos_t</a>&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a message to Cloud IoT Core on a given topic. </p>
<p>To publish a message, the device must already be connected to Cloud IoT Core. Please see <code><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect()</a></code> or <code>iot_connect_to()</code> to connect to Cloud IoT Core.</p>
<p>The callback function has the following signature: </p><pre>
 void foo( iotc_context_handle_t in_context_handle
               , void* user_data
               , iotc_state_t state )
 </pre><p>The callback parameters are:</p><ul>
<li>in_context_handle: A context handle provided to <code><a class="el" href="../../d9/d22/iotc_8h.html#ad182450f87d708b57451afadee80d94f" title="Publish a message to Cloud IoT Core on a given topic.">iotc_publish()</a></code>.</li>
<li>user_data: (Optional) The value that the client application passed to the <code><a class="el" href="../../d9/d22/iotc_8h.html#ad182450f87d708b57451afadee80d94f" title="Publish a message to Cloud IoT Core on a given topic.">iotc_publish()</a></code>.</li>
<li>state: IOTC_STATE_OK The publication has succeeded. For information on other error codes, see the <a href="../../../../../porting_guide.md">porting guide</a> or <code>examples/</code> directory.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_h</td><td>A context handle created by invoking iotc_create_context. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>A string based topic name that you have created for messaging via the IoT Core webservice. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The payload of the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qos</td><td>The Quality of Service (QoS) level. Can be <code>0</code>, <code>1</code>, or <code>2</code>. Cloud IoT Core doesn't support QoS level 2. For more information, see the MQTT specification or <code><a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a5e693b851a47d6adb3db6db4a0689978">iotc_mqtt_qos_e()</a></code> in <code>iotc_mqtt_message.h</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>(Optional) The callback function. Invoked after a message is successfully or unsuccessfully delivered. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_data</td><td>(Optional) Abstract data passed to a callback function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#aea56344dbfbfd50707294338794920d8" title="Publish binary data to Cloud IoT Core on a given topic.">iotc_publish_data</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>The publication request is correctly formatted and queued for publication. </td></tr>
    <tr><td class="paramname">IOTC_OUT_OF_MEMORY</td><td>The platform doesn't have enough memory to fulfull the request. </td></tr>
    <tr><td class="paramname">IOTC_INTERNAL_ERROR</td><td>An unrecoverable error occurred. </td></tr>
    <tr><td class="paramname">IOTC_BACKOFF_TERMINAL</td><td>Backoff applied. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea56344dbfbfd50707294338794920d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea56344dbfbfd50707294338794920d8">&#9670;&nbsp;</a></span>iotc_publish_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_publish_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>iotc_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a0a18a74056aa3064683f73b458eb5913">iotc_mqtt_qos_t</a>&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#ad2b8df04f08d0a880b9f1307b7644762">iotc_user_callback_t</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish binary data to Cloud IoT Core on a given topic. </p>
<p>To publish a message, the device must already be connected to Cloud IoT Core. The Device SDK calls <code><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect()</a></code> or <code>iot_connect_to()</code> to connect to Cloud IoT Core.</p>
<p>Unlike <code><a class="el" href="../../d9/d22/iotc_8h.html#ad182450f87d708b57451afadee80d94f" title="Publish a message to Cloud IoT Core on a given topic.">iotc_publish()</a></code>, <code><a class="el" href="../../d9/d22/iotc_8h.html#aea56344dbfbfd50707294338794920d8" title="Publish binary data to Cloud IoT Core on a given topic.">iotc_publish_data()</a></code> accepts a pointer and data length instead of a null-terminated string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>The message payload. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_len</td><td>The size of the message, in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#ad182450f87d708b57451afadee80d94f" title="Publish a message to Cloud IoT Core on a given topic.">iotc_publish</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#aea56344dbfbfd50707294338794920d8" title="Publish binary data to Cloud IoT Core on a given topic.">iotc_publish_data</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>The publication request is correctly formatted. </td></tr>
    <tr><td class="paramname">IOTC_OUT_OF_MEMORY</td><td>The platform doesn't have enough memory to fulfull the request. </td></tr>
    <tr><td class="paramname">IOTC_INTERNAL_ERROR</td><td>An unrecoverable error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac5bb467d736cd8b6e8de62e8a5fdda23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5bb467d736cd8b6e8de62e8a5fdda23">&#9670;&nbsp;</a></span>iotc_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free all resources created during initialization. </p>
<p>Call to shut down the Device SDK and to free any of its resources.</p>
<p><b>Note</b>: Clean up contexts individually with <code><a class="el" href="../../d9/d22/iotc_8h.html#a18b8276f88ce6816e67c1c1b23edd534" title="Frees the provided context.">iotc_delete_context()</a></code> before calling this function.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a949c6fa4e75efb1814aa5cbedf742c12" title="Initialize libraries.">iotc_initialize</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a18b8276f88ce6816e67c1c1b23edd534" title="Frees the provided context.">iotc_delete_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#ada03683c17e3cf3c5ed286e040140dc9" title="Asynchronously disconnect from Cloud IoT Core.">iotc_shutdown_connection</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>Status OK. </td></tr>
    <tr><td class="paramname">IOTC_FAILED_INITIALIZATION</td><td>An urecoverable error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ada03683c17e3cf3c5ed286e040140dc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada03683c17e3cf3c5ed286e040140dc9">&#9670;&nbsp;</a></span>iotc_shutdown_connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_shutdown_connection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>iotc_h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronously disconnect from Cloud IoT Core. </p>
<p>After disconnecting, the Device SDK invokes the <code><a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect()</a></code> callback with a disconnection status code in the state parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_h</td><td>A context handle created by invoking iotc_create_context.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_SOCKET_NO_ACTIVE_CONNECTION_ERROR</td><td>If there is no connection for this context. </td></tr>
    <tr><td class="paramname">IOTC_STATE_OK</td><td>If the disconnection request is enqueued.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect</a> </dd></dl>

</div>
</div>
<a id="aca7aacc10616954169bff4eed5bfc834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca7aacc10616954169bff4eed5bfc834">&#9670;&nbsp;</a></span>iotc_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7c/iotc__error_8h.html#a31af29ceaf88c8f978117b3be5545932">iotc_state_t</a> iotc_subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#aa9315d3ecedf0c6595e5c825a687995f">iotc_context_handle_t</a>&#160;</td>
          <td class="paramname"><em>iotc_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/d03/iotc__mqtt_8h.html#a0a18a74056aa3064683f73b458eb5913">iotc_mqtt_qos_t</a>&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2c/iotc__types_8h.html#a016750835b9d59ee37282b5c02e59797">iotc_user_subscription_callback_t</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribe to an MQTT topic via Cloud IoT Core. </p>
<p>Makes an MQTT request to Cloud IoT core for topic subscription request.</p>
<p>After subscribing to an MQTT topic, incoming messages will be delivered to the callback function. If the client application can't subscribe to the MQTT topic, the callback function will return information about the error.</p>
<p><code>iotc_user_callback_t</code> defines the subscription callback function. <code>iotc_user_callback_t</code> has the following signature: </p><pre>
    void foo( iotc_context_handle_t in_context_handle,
          iotc_sub_call_type_t call_type,
          const iotc_sub_call_params_t* const params,
          iotc_state_t state,
          void* user_data )
    </pre><p>The <code>iotc_user_callback_t</code> parameters are:</p><ul>
<li>context_handle: The context handle provided to <code>iotc_subscribe</code>.</li>
<li>call_type: The type of callback invocation. Each callback invocation may be related to a subscription confirmation or a new message.</li>
<li>params: The details about subscription confirmations or new messages. The data in this structure varies by call_type value.</li>
<li>state: IOTC_STATE_OK The operation succeeded. For information on other error codes, see the <a href="../../../../../porting_guide.md">porting guide</a> or <code>examples/</code> directory.</li>
<li>user_data: The pointer from the corresponding <code>iotc_subscribe</code> user . parameter.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_h</td><td>A context handle created by invoking iotc_create_context. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>A string with the name of an MQTT topic. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qos</td><td>The Quality of Service (QoS) level. Can be <code>0</code>, <code>1</code>, or <code>2</code>. Cloud IoT Core doesn't support QoS level 2. For more information, see the MQTT specification or <code>iotc_mqtt_qos_e</code> in <code>iotc_mqtt_message.h</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>The callback function. Invoked after a message is successfully or unsuccessfully received. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_data</td><td>(Optional) A pointer which will be passed to the callback function's user_data parameter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d22/iotc_8h.html#a657294c0f1cda3a8ec5a2bb284709657" title="Create a connection context.">iotc_create_context</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#a48ab2dda7fedc71942119642f5b0e9c2" title="Connect to Cloud IoT Core with the provided context.">iotc_connect</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#ad182450f87d708b57451afadee80d94f" title="Publish a message to Cloud IoT Core on a given topic.">iotc_publish</a> </dd>
<dd>
<a class="el" href="../../d9/d22/iotc_8h.html#aea56344dbfbfd50707294338794920d8" title="Publish binary data to Cloud IoT Core on a given topic.">iotc_publish_data</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">IOTC_STATE_OK</td><td>The subscription request is correctly formatted. </td></tr>
    <tr><td class="paramname">IOTC_OUT_OF_MEMORY</td><td>The platform doesn't have enough memory to fulfull the request. </td></tr>
    <tr><td class="paramname">IOTC_INTERNAL_ERROR</td><td>An unrecoverable error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
